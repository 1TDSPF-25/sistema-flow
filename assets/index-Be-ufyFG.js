import{r as u,a as b,b as x,c as g,j as e}from"./index-CgFfTDc1.js";const n="http://localhost:3001/produtos";function f(){u.useEffect(()=>{document.title="FarmáciaPlus - Editar Produtos"},[]);const s=b(),{id:t}=x(),{reset:c,register:i,handleSubmit:l,formState:{errors:r}}=g({mode:"onChange"});u.useEffect(()=>{(async()=>{try{const o=await fetch(`${n}/${t}`);if(!o.ok)throw new Error("Erro ao buscar o produto");const d=await o.json();c({id:d.id??0,nome:d.nome??"",preco:d.preco??0})}catch(o){console.error(o)}})()},[t,c]);const m=async a=>{try{await fetch(`${n}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),alert("Produto editado com sucesso!"),s("/produtos")}catch(o){console.error("Erro ao editar o produto:",o)}},p=async()=>{if(window.confirm("Tem certeza que deseja apagar este produto?"))try{await fetch(`${n}/${t}`,{method:"DELETE"}),alert("Produto apagado com sucesso!"),s("/produtos")}catch(a){console.error("Erro ao apagar o produto:",a),alert("Ocorreu um erro ao tentar apagar o produto.")}};return e.jsxs("main",{children:[e.jsx("h1",{children:"Editar os produtos"}),e.jsx("div",{children:e.jsxs("form",{onSubmit:l(m),className:"mx-auto max-w-md space-y-4 rounded-xl border border-gray-200 bg-white p-6 shadow text-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Editar Produto"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700",children:"Nome"}),e.jsx("input",{id:"nome",type:"text",...i("nome",{required:!0,minLength:3,maxLength:200}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"Ex.: Teclado Mecânico","aria-invalid":!!r.nome,"aria-describedby":r.nome?"erro-nome":void 0}),r.nome?e.jsx("span",{id:"erro-nome",className:"text-red-600 bg-red-300 border-2 border-red-600 rounded-sm block text-center",children:"Digite um nome válido!"}):""]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preco",className:"block text-sm font-medium text-gray-700",children:"Preço (R$)"}),e.jsx("input",{id:"preco",type:"number",step:"0.01",...i("preco",{required:!0,valueAsNumber:!0,min:.01}),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"0.00","aria-invalid":!!r.preco,"aria-describedby":r.preco?"erro-preco":void 0}),r.preco?e.jsx("span",{id:"erro-preco",className:"text-red-600 bg-red-300 border-2 border-red-600 rounded-sm block text-center",children:"Digite um valor válido!"}):""]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:p,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:ring-2 focus:ring-red-300",children:"Apagar Produto"}),e.jsx("button",{type:"submit",className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-300",children:"Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>s("/produtos"),className:"rounded-lg bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300",children:"Cancelar"})]})]})})]})}export{f as default};
