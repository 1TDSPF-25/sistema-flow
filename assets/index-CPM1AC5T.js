import{a as j,c as N,j as e,L as c,l as y}from"./index-Dx0Trzkc.js";const u="http://localhost:3001/usuarios",o=({error:i})=>i?e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.message}):null;function S(){const i=j(),{register:s,setError:t,handleSubmit:f,watch:l,formState:{errors:r}}=N({shouldUnregister:!0}),x=l("email"),p=l("senha"),h=async a=>{try{const m=await(await fetch(u)).json(),g=m.some(n=>n.email===a.email),b=m.some(n=>n.nomeUser===a.nome);if(g){t("email",{type:"manual",message:"Email já cadastrado"});return}if(b){t("nome",{type:"manual",message:"Nome de usuario ja cadastrado"});return}if(!(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok){alert("Erro ao cadastrar. Tente novamente.");return}const d=await y({email:a.email,senha:a.senha});d.autenticado?i("/"):alert(d.erro)}catch{alert("Erro inesperado. Tente novamente.")}};return e.jsx("main",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("section",{className:"bg-white shadow-xl rounded-lg p-8 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastrar Farmácia"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Crie o perfil da sua Farmácia no portal."})]}),e.jsxs("form",{onSubmit:f(h),className:"space-y-6",children:[e.jsxs("fieldset",{className:"space-y-6 [&_input]:text-black",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idNome",className:"mb-1 font-medium text-gray-700",children:"Nome Completo"}),e.jsx("input",{type:"text",id:"idNome",placeholder:"Nome completo da farmácia/responsável",className:`p-3 border rounded-md focus:outline-none focus:ring-2 ${r.nome?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("nome",{required:"Campo obrigatório",pattern:{value:/^[A-Za-zÀ-ÖØ-öø-ÿ\s]{3,}$/,message:"Apenas letras e no mínimo 3 caracteres"}})}),e.jsx(o,{error:r.nome})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idCpf",className:"mb-1 font-medium text-gray-700",children:"CPF"}),e.jsx("input",{type:"text",id:"idCpf",inputMode:"numeric",placeholder:"Apenas 11 dígitos numéricos",className:`p-3 border rounded-md focus:outline-none focus:ring-2 ${r.cpf?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("cpf",{required:"Campo obrigatório",pattern:{value:/^\d{11}$/,message:"Apenas 11 números, sem pontos ou traços"}})}),e.jsx(o,{error:r.cpf})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idEmail",className:"mb-1 font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"idEmail",placeholder:"Ex: seu.email@dominio.com",className:`p-3 border rounded-md focus:outline-none focus:ring-2 ${r.email?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("email",{required:"Campo obrigatório",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Formato de email inválido"}})}),e.jsx(o,{error:r.email})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idConfirmarEmail",className:"mb-1 font-medium text-gray-700",children:"Confirmar Email"}),e.jsx("input",{type:"email",id:"idConfirmarEmail",placeholder:"Repita o email acima",className:`p-3 border rounded-md focus:outline-none focus:ring-2 ${r.confirmarEmail?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("confirmarEmail",{required:"Campo obrigatório",validate:a=>a===x||"Emails não correspondem"})}),e.jsx(o,{error:r.confirmarEmail})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idSenha",className:"mb-1 font-medium text-gray-700",children:"Senha"}),e.jsx("input",{type:"password",id:"idSenha",placeholder:"Mínimo de 6 caracteres",className:`p-3 w-full border rounded-md focus:outline-none focus:ring-2 ${r.senha?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("senha",{required:"Campo obrigatório",minLength:{value:6,message:"Informe no mínimo 6 caracteres"}})}),e.jsx(o,{error:r.senha})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"idSenhaConfirmada",className:"mb-1 font-medium text-gray-700",children:"Confirmar Senha"}),e.jsx("input",{type:"password",id:"idSenhaConfirmada",placeholder:"Repita a senha acima",className:`p-3 w-full border rounded-md focus:outline-none focus:ring-2 ${r.confirmarSenha?"border-red-500 focus:ring-red-200":"border-gray-300 focus:ring-blue-500"}`,...s("confirmarSenha",{required:"Campo obrigatório",validate:a=>a===p||"Senhas não correspondem"})}),e.jsx(o,{error:r.confirmarSenha})]})]}),e.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:["Ao criar um perfil, você concorda com os"," ",e.jsx(c,{to:"/",className:"font-semibold text-blue-600 hover:text-blue-800",children:"Termos de Uso"}),"."]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 rounded-md hover:bg-blue-700 transition duration-300 mt-6",children:"Cadastrar Farmácia"})]}),e.jsxs("p",{className:"text-center mt-6 text-gray-600",children:["Já tem um perfil?"," ",e.jsx(c,{to:"/login",className:"text-blue-600 font-medium hover:text-blue-800",children:"Entrar"})]})]})})}export{S as default};
